{"version":3,"sources":["../src/ReactSixteenAdapter.js"],"names":["is164","TestUtils","Simulate","touchStart","is165","auxClick","is166","React","unstable_AsyncMode","is168","act","hasShouldComponentUpdateBug","semver","satisfies","testRendererVersion","FiberTags","nodeAndSiblingsArray","nodeWithSibling","array","node","push","sibling","flatten","arr","result","stack","i","length","n","pop","el","Array","isArray","nodeTypeFromType","type","Portal","unmemoType","elementToTree","children","containerInfo","props","nodeType","key","ref","instance","rendered","toTree","vnode","tag","HostRoot","childrenToTree","child","HostPortal","stateNode","memoizedProps","ClassComponent","FunctionalComponent","MemoClass","elementType","MemoSFC","renderedNodes","map","HostComponent","HostText","Fragment","Mode","ContextProvider","ContextConsumer","Profiler","ForwardRef","pendingProps","Suspense","Lazy","Error","nodeToHostNode","_node","mapper","item","ReactDOM","findDOMNode","replaceLazyWithFallback","fallback","eventOptions","animation","pointerEvents","getEmptyStateValue","EmptyState","Component","testRenderer","ShallowRenderer","render","createElement","_instance","state","wrapAct","fn","returnVal","getProviderDefaultValue","Provider","_context","_defaultValue","_currentValue","makeFakeElement","$$typeof","Element","isStateful","prototype","isReactComponent","__reactAutoBindPairs","ReactSixteenAdapter","lifecycles","options","enableComponentDidUpdateOnSetState","legacyContextMode","componentDidUpdate","onSetState","getDerivedStateFromProps","getSnapshotBeforeUpdate","setState","skipsComponentDidUpdateOnNullish","getChildContext","calledByRenderer","getDerivedStateFromError","TypeError","attachTo","hydrateIn","wrappingComponentProps","domNode","global","document","adapter","context","callback","wrapperProps","refProp","ReactWrapperComponent","wrappedEl","hydrate","setChildProps","unmount","unmountComponentAtNode","getNode","isCustomComponent","_reactInternalFiber","simulateError","nodeHierarchy","rootNode","error","isErrorBoundary","elInstance","componentDidCatch","find","catchingInstance","catchingType","displayNameOfNode","undefined","simulateEvent","event","mock","mappedEvent","eventFn","batchedUpdates","getWrappingComponentRenderer","inst","getMountWrapperInstance","wrapInvoke","renderer","suspenseFallback","isDOM","cachedNode","lastComponent","wrappedComponent","sentinel","wrapPureComponent","compare","RangeError","shouldComponentUpdate","nextProps","isPureReactComponent","memoized","prevProps","shouldUpdate","args","defaultProps","displayName","wrapFunctionalComponent","unmaskedContext","providerValues","Map","set","value","MockProvider","getProviderFromConsumer","has","get","MockConsumer","renderedEl","FakeSuspenseWrapper","contextTypes","InnerComp","emptyStateValue","Object","defineProperty","configurable","enumerable","writable","output","getRenderOutput","concat","handler","checkPropTypes","typeSpecs","values","location","hierarchy","childContextTypes","ContextWrapper","ReactDOMServer","renderToStaticMarkup","mode","EnzymeAdapter","MODES","MOUNT","createMountRenderer","SHALLOW","createShallowRenderer","STRING","createStringRenderer","element","matchingType","supportsArray","nodes","ConcurrentMode","AsyncMode","NaN","StrictMode","$$typeofType","Memo","nodeName","name","object","fragment","fakeElement","isValidElement","Consumer","RootFinder","module","exports"],"mappings":"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","file":"ReactSixteenAdapter.js","sourcesContent":["/* eslint no-use-before-define: 0 */\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n// eslint-disable-next-line import/no-unresolved\nimport ReactDOMServer from 'react-dom/server';\n// eslint-disable-next-line import/no-unresolved\nimport ShallowRenderer from 'react-test-renderer/shallow';\nimport { version as testRendererVersion } from 'react-test-renderer/package.json';\n// eslint-disable-next-line import/no-unresolved\nimport TestUtils from 'react-dom/test-utils';\nimport semver from 'semver';\nimport checkPropTypes from 'prop-types/checkPropTypes';\nimport has from 'has';\nimport {\n  AsyncMode,\n  ConcurrentMode,\n  ContextConsumer,\n  ContextProvider,\n  Element,\n  ForwardRef,\n  Fragment,\n  isContextConsumer,\n  isContextProvider,\n  isElement,\n  isForwardRef,\n  isLazy,\n  isMemo,\n  isPortal,\n  isSuspense,\n  isValidElementType,\n  Lazy,\n  Memo,\n  Portal,\n  Profiler,\n  StrictMode,\n  Suspense,\n} from 'react-is';\nimport { EnzymeAdapter } from 'enzyme';\nimport { typeOfNode } from 'enzyme/build/Utils';\nimport shallowEqual from 'enzyme-shallow-equal';\nimport {\n  displayNameOfNode,\n  elementToTree as utilElementToTree,\n  nodeTypeFromType as utilNodeTypeFromType,\n  mapNativeEventNames,\n  propFromEvent,\n  assertDomAvailable,\n  withSetStateAllowed,\n  createRenderWrapper,\n  createMountWrapper,\n  propsWithKeysAndRef,\n  ensureKeyOrUndefined,\n  simulateError,\n  wrap,\n  getMaskedContext,\n  getComponentStack,\n  RootFinder,\n  getNodeFromRootFinder,\n  wrapWithWrappingComponent,\n  getWrappingComponentMountRenderer,\n} from 'enzyme-adapter-utils';\nimport findCurrentFiberUsingSlowPath from './findCurrentFiberUsingSlowPath';\nimport detectFiberTags from './detectFiberTags';\n\nconst is164 = !!TestUtils.Simulate.touchStart; // 16.4+\nconst is165 = !!TestUtils.Simulate.auxClick; // 16.5+\nconst is166 = is165 && !React.unstable_AsyncMode; // 16.6+\nconst is168 = is166 && typeof TestUtils.act === 'function';\n\nconst hasShouldComponentUpdateBug = semver.satisfies(testRendererVersion, '< 16.8');\n\n// Lazily populated if DOM is available.\nlet FiberTags = null;\n\nfunction nodeAndSiblingsArray(nodeWithSibling) {\n  const array = [];\n  let node = nodeWithSibling;\n  while (node != null) {\n    array.push(node);\n    node = node.sibling;\n  }\n  return array;\n}\n\nfunction flatten(arr) {\n  const result = [];\n  const stack = [{ i: 0, array: arr }];\n  while (stack.length) {\n    const n = stack.pop();\n    while (n.i < n.array.length) {\n      const el = n.array[n.i];\n      n.i += 1;\n      if (Array.isArray(el)) {\n        stack.push(n);\n        stack.push({ i: 0, array: el });\n        break;\n      }\n      result.push(el);\n    }\n  }\n  return result;\n}\n\nfunction nodeTypeFromType(type) {\n  if (type === Portal) {\n    return 'portal';\n  }\n\n  return utilNodeTypeFromType(type);\n}\n\nfunction unmemoType(type) {\n  return isMemo(type) ? type.type : type;\n}\n\nfunction elementToTree(el) {\n  if (!isPortal(el)) {\n    return utilElementToTree(el, elementToTree);\n  }\n\n  const { children, containerInfo } = el;\n  const props = { children, containerInfo };\n\n  return {\n    nodeType: 'portal',\n    type: Portal,\n    props,\n    key: ensureKeyOrUndefined(el.key),\n    ref: el.ref || null,\n    instance: null,\n    rendered: elementToTree(el.children),\n  };\n}\n\nfunction toTree(vnode) {\n  if (vnode == null) {\n    return null;\n  }\n  // TODO(lmr): I'm not really sure I understand whether or not this is what\n  // i should be doing, or if this is a hack for something i'm doing wrong\n  // somewhere else. Should talk to sebastian about this perhaps\n  const node = findCurrentFiberUsingSlowPath(vnode);\n  switch (node.tag) {\n    case FiberTags.HostRoot:\n      return childrenToTree(node.child);\n    case FiberTags.HostPortal: {\n      const {\n        stateNode: { containerInfo },\n        memoizedProps: children,\n      } = node;\n      const props = { containerInfo, children };\n      return {\n        nodeType: 'portal',\n        type: Portal,\n        props,\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: null,\n        rendered: childrenToTree(node.child),\n      };\n    }\n    case FiberTags.ClassComponent:\n      return {\n        nodeType: 'class',\n        type: node.type,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: node.stateNode,\n        rendered: childrenToTree(node.child),\n      };\n    case FiberTags.FunctionalComponent:\n      return {\n        nodeType: 'function',\n        type: node.type,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: null,\n        rendered: childrenToTree(node.child),\n      };\n    case FiberTags.MemoClass:\n      return {\n        nodeType: 'class',\n        type: node.elementType.type,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: node.stateNode,\n        rendered: childrenToTree(node.child.child),\n      };\n    case FiberTags.MemoSFC: {\n      let renderedNodes = flatten(nodeAndSiblingsArray(node.child).map(toTree));\n      if (renderedNodes.length === 0) {\n        renderedNodes = [node.memoizedProps.children];\n      }\n      return {\n        nodeType: 'function',\n        type: node.elementType,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: null,\n        rendered: renderedNodes,\n      };\n    }\n    case FiberTags.HostComponent: {\n      let renderedNodes = flatten(nodeAndSiblingsArray(node.child).map(toTree));\n      if (renderedNodes.length === 0) {\n        renderedNodes = [node.memoizedProps.children];\n      }\n      return {\n        nodeType: 'host',\n        type: node.type,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: node.stateNode,\n        rendered: renderedNodes,\n      };\n    }\n    case FiberTags.HostText:\n      return node.memoizedProps;\n    case FiberTags.Fragment:\n    case FiberTags.Mode:\n    case FiberTags.ContextProvider:\n    case FiberTags.ContextConsumer:\n      return childrenToTree(node.child);\n    case FiberTags.Profiler:\n    case FiberTags.ForwardRef: {\n      return {\n        nodeType: 'function',\n        type: node.type,\n        props: { ...node.pendingProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: null,\n        rendered: childrenToTree(node.child),\n      };\n    }\n    case FiberTags.Suspense: {\n      return {\n        nodeType: 'function',\n        type: Suspense,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: null,\n        rendered: childrenToTree(node.child),\n      };\n    }\n    case FiberTags.Lazy:\n      return childrenToTree(node.child);\n    default:\n      throw new Error(`Enzyme Internal Error: unknown node with tag ${node.tag}`);\n  }\n}\n\nfunction childrenToTree(node) {\n  if (!node) {\n    return null;\n  }\n  const children = nodeAndSiblingsArray(node);\n  if (children.length === 0) {\n    return null;\n  }\n  if (children.length === 1) {\n    return toTree(children[0]);\n  }\n  return flatten(children.map(toTree));\n}\n\nfunction nodeToHostNode(_node) {\n  // NOTE(lmr): node could be a function component\n  // which wont have an instance prop, but we can get the\n  // host node associated with its return value at that point.\n  // Although this breaks down if the return value is an array,\n  // as is possible with React 16.\n  let node = _node;\n  while (node && !Array.isArray(node) && node.instance === null) {\n    node = node.rendered;\n  }\n  // if the SFC returned null effectively, there is no host node.\n  if (!node) {\n    return null;\n  }\n\n  const mapper = (item) => {\n    if (item && item.instance) return ReactDOM.findDOMNode(item.instance);\n    return null;\n  };\n  if (Array.isArray(node)) {\n    return node.map(mapper);\n  }\n  if (Array.isArray(node.rendered) && node.nodeType === 'class') {\n    return node.rendered.map(mapper);\n  }\n  return mapper(node);\n}\n\nfunction replaceLazyWithFallback(node, fallback) {\n  if (!node) {\n    return null;\n  }\n  if (Array.isArray(node)) {\n    return node.map((el) => replaceLazyWithFallback(el, fallback));\n  }\n  if (isLazy(node.type)) {\n    return fallback;\n  }\n  return {\n    ...node,\n    props: {\n      ...node.props,\n      children: replaceLazyWithFallback(node.props.children, fallback),\n    },\n  };\n}\n\nconst eventOptions = {\n  animation: true,\n  pointerEvents: is164,\n  auxClick: is165,\n};\n\nfunction getEmptyStateValue() {\n  // this handles a bug in React 16.0 - 16.2\n  // see https://github.com/facebook/react/commit/39be83565c65f9c522150e52375167568a2a1459\n  // also see https://github.com/facebook/react/pull/11965\n\n  // eslint-disable-next-line react/prefer-stateless-function\n  class EmptyState extends React.Component {\n    render() {\n      return null;\n    }\n  }\n  const testRenderer = new ShallowRenderer();\n  testRenderer.render(React.createElement(EmptyState));\n  return testRenderer._instance.state;\n}\n\nfunction wrapAct(fn) {\n  if (!is168) {\n    return fn();\n  }\n  let returnVal;\n  TestUtils.act(() => { returnVal = fn(); });\n  return returnVal;\n}\n\nfunction getProviderDefaultValue(Provider) {\n  // React stores references to the Provider's defaultValue differently across versions.\n  if ('_defaultValue' in Provider._context) {\n    return Provider._context._defaultValue;\n  }\n  if ('_currentValue' in Provider._context) {\n    return Provider._context._currentValue;\n  }\n  throw new Error('Enzyme Internal Error: can’t figure out how to get Provider’s default value');\n}\n\nfunction makeFakeElement(type) {\n  return { $$typeof: Element, type };\n}\n\nfunction isStateful(Component) {\n  return Component.prototype && (\n    Component.prototype.isReactComponent\n    || Array.isArray(Component.__reactAutoBindPairs) // fallback for createClass components\n  );\n}\n\nclass ReactSixteenAdapter extends EnzymeAdapter {\n  constructor() {\n    super();\n    const { lifecycles } = this.options;\n    this.options = {\n      ...this.options,\n      enableComponentDidUpdateOnSetState: true, // TODO: remove, semver-major\n      legacyContextMode: 'parent',\n      lifecycles: {\n        ...lifecycles,\n        componentDidUpdate: {\n          onSetState: true,\n        },\n        getDerivedStateFromProps: {\n          hasShouldComponentUpdateBug,\n        },\n        getSnapshotBeforeUpdate: true,\n        setState: {\n          skipsComponentDidUpdateOnNullish: true,\n        },\n        getChildContext: {\n          calledByRenderer: false,\n        },\n        getDerivedStateFromError: is166,\n      },\n    };\n  }\n\n  createMountRenderer(options) {\n    assertDomAvailable('mount');\n    if (has(options, 'suspenseFallback')) {\n      throw new TypeError('`suspenseFallback` is not supported by the `mount` renderer');\n    }\n    if (FiberTags === null) {\n      // Requires DOM.\n      FiberTags = detectFiberTags();\n    }\n    const { attachTo, hydrateIn, wrappingComponentProps } = options;\n    const domNode = hydrateIn || attachTo || global.document.createElement('div');\n    let instance = null;\n    const adapter = this;\n    return {\n      render(el, context, callback) {\n        return wrapAct(() => {\n          if (instance === null) {\n            const { type, props, ref } = el;\n            const wrapperProps = {\n              Component: type,\n              props,\n              wrappingComponentProps,\n              context,\n              ...(ref && { refProp: ref }),\n            };\n            const ReactWrapperComponent = createMountWrapper(el, { ...options, adapter });\n            const wrappedEl = React.createElement(ReactWrapperComponent, wrapperProps);\n            instance = hydrateIn\n              ? ReactDOM.hydrate(wrappedEl, domNode)\n              : ReactDOM.render(wrappedEl, domNode);\n            if (typeof callback === 'function') {\n              callback();\n            }\n          } else {\n            instance.setChildProps(el.props, context, callback);\n          }\n        });\n      },\n      unmount() {\n        ReactDOM.unmountComponentAtNode(domNode);\n        instance = null;\n      },\n      getNode() {\n        if (!instance) {\n          return null;\n        }\n        return getNodeFromRootFinder(\n          adapter.isCustomComponent,\n          toTree(instance._reactInternalFiber),\n          options,\n        );\n      },\n      simulateError(nodeHierarchy, rootNode, error) {\n        const isErrorBoundary = ({ instance: elInstance, type }) => {\n          if (is166 && type && type.getDerivedStateFromError) {\n            return true;\n          }\n          return elInstance && elInstance.componentDidCatch;\n        };\n\n        const {\n          instance: catchingInstance,\n          type: catchingType,\n        } = nodeHierarchy.find(isErrorBoundary) || {};\n\n        simulateError(\n          error,\n          catchingInstance,\n          rootNode,\n          nodeHierarchy,\n          nodeTypeFromType,\n          adapter.displayNameOfNode,\n          is166 ? catchingType : undefined,\n        );\n      },\n      simulateEvent(node, event, mock) {\n        const mappedEvent = mapNativeEventNames(event, eventOptions);\n        const eventFn = TestUtils.Simulate[mappedEvent];\n        if (!eventFn) {\n          throw new TypeError(`ReactWrapper::simulate() event '${event}' does not exist`);\n        }\n        wrapAct(() => {\n          eventFn(adapter.nodeToHostNode(node), mock);\n        });\n      },\n      batchedUpdates(fn) {\n        return fn();\n        // return ReactDOM.unstable_batchedUpdates(fn);\n      },\n      getWrappingComponentRenderer() {\n        return {\n          ...this,\n          ...getWrappingComponentMountRenderer({\n            toTree: (inst) => toTree(inst._reactInternalFiber),\n            getMountWrapperInstance: () => instance,\n          }),\n        };\n      },\n      ...(is168 && { wrapInvoke: wrapAct }),\n    };\n  }\n\n  createShallowRenderer(options = {}) {\n    const adapter = this;\n    const renderer = new ShallowRenderer();\n    const { suspenseFallback } = options;\n    if (typeof suspenseFallback !== 'undefined' && typeof suspenseFallback !== 'boolean') {\n      throw TypeError('`options.suspenseFallback` should be boolean or undefined');\n    }\n    let isDOM = false;\n    let cachedNode = null;\n\n    let lastComponent = null;\n    let wrappedComponent = null;\n    const sentinel = {};\n\n    // wrap memo components with a PureComponent, or a class component with sCU\n    const wrapPureComponent = (Component, compare) => {\n      if (!is166) {\n        throw new RangeError('this function should not be called in React < 16.6. Please report this!');\n      }\n      if (lastComponent !== Component) {\n        if (isStateful(Component)) {\n          wrappedComponent = class extends Component {}; // eslint-disable-line react/prefer-stateless-function\n          if (compare) {\n            wrappedComponent.prototype.shouldComponentUpdate = (nextProps) => !compare(this.props, nextProps);\n          } else {\n            wrappedComponent.prototype.isPureReactComponent = true;\n          }\n        } else {\n          let memoized = sentinel;\n          let prevProps;\n          wrappedComponent = function (props, ...args) {\n            const shouldUpdate = memoized === sentinel || (compare\n              ? !compare(prevProps, props)\n              : !shallowEqual(prevProps, props)\n            );\n            if (shouldUpdate) {\n              memoized = Component({ ...Component.defaultProps, ...props }, ...args);\n              prevProps = props;\n            }\n            return memoized;\n          };\n        }\n        Object.assign(\n          wrappedComponent,\n          Component,\n          { displayName: adapter.displayNameOfNode({ type: Component }) },\n        );\n        lastComponent = Component;\n      }\n      return wrappedComponent;\n    };\n\n    // Wrap functional components on versions prior to 16.5,\n    // to avoid inadvertently pass a `this` instance to it.\n    const wrapFunctionalComponent = (Component) => {\n      if (is166 && has(Component, 'defaultProps')) {\n        if (lastComponent !== Component) {\n          wrappedComponent = Object.assign(\n            // eslint-disable-next-line new-cap\n            (props, ...args) => Component({ ...Component.defaultProps, ...props }, ...args),\n            Component,\n            { displayName: adapter.displayNameOfNode({ type: Component }) },\n          );\n          lastComponent = Component;\n        }\n        return wrappedComponent;\n      }\n      if (is165) {\n        return Component;\n      }\n\n      if (lastComponent !== Component) {\n        wrappedComponent = Object.assign(\n          (...args) => Component(...args), // eslint-disable-line new-cap\n          Component,\n        );\n        lastComponent = Component;\n      }\n      return wrappedComponent;\n    };\n\n    return {\n      render(el, unmaskedContext, {\n        providerValues = new Map(),\n      } = {}) {\n        cachedNode = el;\n        /* eslint consistent-return: 0 */\n        if (typeof el.type === 'string') {\n          isDOM = true;\n        } else if (isContextProvider(el)) {\n          providerValues.set(el.type, el.props.value);\n          const MockProvider = Object.assign(\n            (props) => props.children,\n            el.type,\n          );\n          return withSetStateAllowed(() => renderer.render({ ...el, type: MockProvider }));\n        } else if (isContextConsumer(el)) {\n          const Provider = adapter.getProviderFromConsumer(el.type);\n          const value = providerValues.has(Provider)\n            ? providerValues.get(Provider)\n            : getProviderDefaultValue(Provider);\n          const MockConsumer = Object.assign(\n            (props) => props.children(value),\n            el.type,\n          );\n          return withSetStateAllowed(() => renderer.render({ ...el, type: MockConsumer }));\n        } else {\n          isDOM = false;\n          let renderedEl = el;\n          if (isLazy(renderedEl)) {\n            throw TypeError('`React.lazy` is not supported by shallow rendering.');\n          }\n          if (isSuspense(renderedEl)) {\n            let { children } = renderedEl.props;\n            if (suspenseFallback) {\n              const { fallback } = renderedEl.props;\n              children = replaceLazyWithFallback(children, fallback);\n            }\n            const FakeSuspenseWrapper = () => children;\n            renderedEl = React.createElement(FakeSuspenseWrapper, null, children);\n          }\n          const { type: Component } = renderedEl;\n\n          const context = getMaskedContext(Component.contextTypes, unmaskedContext);\n\n          if (isMemo(el.type)) {\n            const { type: InnerComp, compare } = el.type;\n\n            return withSetStateAllowed(() => renderer.render(\n              { ...el, type: wrapPureComponent(InnerComp, compare) },\n              context,\n            ));\n          }\n\n          if (!isStateful(Component) && typeof Component === 'function') {\n            return withSetStateAllowed(() => renderer.render(\n              { ...renderedEl, type: wrapFunctionalComponent(Component) },\n              context,\n            ));\n          }\n\n          if (isStateful) {\n            // fix react bug; see implementation of `getEmptyStateValue`\n            const emptyStateValue = getEmptyStateValue();\n            if (emptyStateValue) {\n              Object.defineProperty(Component.prototype, 'state', {\n                configurable: true,\n                enumerable: true,\n                get() {\n                  return null;\n                },\n                set(value) {\n                  if (value !== emptyStateValue) {\n                    Object.defineProperty(this, 'state', {\n                      configurable: true,\n                      enumerable: true,\n                      value,\n                      writable: true,\n                    });\n                  }\n                  return true;\n                },\n              });\n            }\n          }\n          return withSetStateAllowed(() => renderer.render(renderedEl, context));\n        }\n      },\n      unmount() {\n        renderer.unmount();\n      },\n      getNode() {\n        if (isDOM) {\n          return elementToTree(cachedNode);\n        }\n        const output = renderer.getRenderOutput();\n        return {\n          nodeType: nodeTypeFromType(cachedNode.type),\n          type: cachedNode.type,\n          props: cachedNode.props,\n          key: ensureKeyOrUndefined(cachedNode.key),\n          ref: cachedNode.ref,\n          instance: renderer._instance,\n          rendered: Array.isArray(output)\n            ? flatten(output).map((el) => elementToTree(el))\n            : elementToTree(output),\n        };\n      },\n      simulateError(nodeHierarchy, rootNode, error) {\n        simulateError(\n          error,\n          renderer._instance,\n          cachedNode,\n          nodeHierarchy.concat(cachedNode),\n          nodeTypeFromType,\n          adapter.displayNameOfNode,\n          is166 ? cachedNode.type : undefined,\n        );\n      },\n      simulateEvent(node, event, ...args) {\n        const handler = node.props[propFromEvent(event, eventOptions)];\n        if (handler) {\n          withSetStateAllowed(() => {\n            // TODO(lmr): create/use synthetic events\n            // TODO(lmr): emulate React's event propagation\n            // ReactDOM.unstable_batchedUpdates(() => {\n            handler(...args);\n            // });\n          });\n        }\n      },\n      batchedUpdates(fn) {\n        return fn();\n        // return ReactDOM.unstable_batchedUpdates(fn);\n      },\n      checkPropTypes(typeSpecs, values, location, hierarchy) {\n        return checkPropTypes(\n          typeSpecs,\n          values,\n          location,\n          displayNameOfNode(cachedNode),\n          () => getComponentStack(hierarchy.concat([cachedNode])),\n        );\n      },\n    };\n  }\n\n  createStringRenderer(options) {\n    if (has(options, 'suspenseFallback')) {\n      throw new TypeError('`suspenseFallback` should not be specified in options of string renderer');\n    }\n    return {\n      render(el, context) {\n        if (options.context && (el.type.contextTypes || options.childContextTypes)) {\n          const childContextTypes = {\n            ...(el.type.contextTypes || {}),\n            ...options.childContextTypes,\n          };\n          const ContextWrapper = createRenderWrapper(el, context, childContextTypes);\n          return ReactDOMServer.renderToStaticMarkup(React.createElement(ContextWrapper));\n        }\n        return ReactDOMServer.renderToStaticMarkup(el);\n      },\n    };\n  }\n\n  // Provided a bag of options, return an `EnzymeRenderer`. Some options can be implementation\n  // specific, like `attach` etc. for React, but not part of this interface explicitly.\n  // eslint-disable-next-line class-methods-use-this\n  createRenderer(options) {\n    switch (options.mode) {\n      case EnzymeAdapter.MODES.MOUNT: return this.createMountRenderer(options);\n      case EnzymeAdapter.MODES.SHALLOW: return this.createShallowRenderer(options);\n      case EnzymeAdapter.MODES.STRING: return this.createStringRenderer(options);\n      default:\n        throw new Error(`Enzyme Internal Error: Unrecognized mode: ${options.mode}`);\n    }\n  }\n\n  wrap(element) {\n    return wrap(element);\n  }\n\n  // converts an RSTNode to the corresponding JSX Pragma Element. This will be needed\n  // in order to implement the `Wrapper.mount()` and `Wrapper.shallow()` methods, but should\n  // be pretty straightforward for people to implement.\n  // eslint-disable-next-line class-methods-use-this\n  nodeToElement(node) {\n    if (!node || typeof node !== 'object') return null;\n    const { type } = node;\n    return React.createElement(unmemoType(type), propsWithKeysAndRef(node));\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  matchesElementType(node, matchingType) {\n    if (!node) {\n      return node;\n    }\n    const { type } = node;\n    return unmemoType(type) === unmemoType(matchingType);\n  }\n\n  elementToNode(element) {\n    return elementToTree(element);\n  }\n\n  nodeToHostNode(node, supportsArray = false) {\n    const nodes = nodeToHostNode(node);\n    if (Array.isArray(nodes) && !supportsArray) {\n      return nodes[0];\n    }\n    return nodes;\n  }\n\n  displayNameOfNode(node) {\n    if (!node) return null;\n    const { type, $$typeof } = node;\n\n    const nodeType = type || $$typeof;\n\n    // newer node types may be undefined, so only test if the nodeType exists\n    if (nodeType) {\n      switch (nodeType) {\n        case (is166 ? ConcurrentMode : AsyncMode) || NaN: return is166 ? 'ConcurrentMode' : 'AsyncMode';\n        case Fragment || NaN: return 'Fragment';\n        case StrictMode || NaN: return 'StrictMode';\n        case Profiler || NaN: return 'Profiler';\n        case Portal || NaN: return 'Portal';\n        case Suspense || NaN: return 'Suspense';\n        default:\n      }\n    }\n\n    const $$typeofType = type && type.$$typeof;\n\n    switch ($$typeofType) {\n      case ContextConsumer || NaN: return 'ContextConsumer';\n      case ContextProvider || NaN: return 'ContextProvider';\n      case Memo || NaN: {\n        const nodeName = displayNameOfNode(node);\n        return typeof nodeName === 'string' ? nodeName : `Memo(${displayNameOfNode(type)})`;\n      }\n      case ForwardRef || NaN: {\n        if (type.displayName) {\n          return type.displayName;\n        }\n        const name = displayNameOfNode({ type: type.render });\n        return name ? `ForwardRef(${name})` : 'ForwardRef';\n      }\n      case Lazy || NaN: {\n        return 'lazy';\n      }\n      default: return displayNameOfNode(node);\n    }\n  }\n\n  isValidElement(element) {\n    return isElement(element);\n  }\n\n  isValidElementType(object) {\n    return !!object && isValidElementType(object);\n  }\n\n  isFragment(fragment) {\n    return typeOfNode(fragment) === Fragment;\n  }\n\n  isCustomComponent(type) {\n    const fakeElement = makeFakeElement(type);\n    return !!type && (\n      typeof type === 'function'\n      || isForwardRef(fakeElement)\n      || isContextProvider(fakeElement)\n      || isContextConsumer(fakeElement)\n      || isSuspense(fakeElement)\n    );\n  }\n\n  isContextConsumer(type) {\n    return !!type && isContextConsumer(makeFakeElement(type));\n  }\n\n  isCustomComponentElement(inst) {\n    if (!inst || !this.isValidElement(inst)) {\n      return false;\n    }\n    return this.isCustomComponent(inst.type);\n  }\n\n  getProviderFromConsumer(Consumer) {\n    // React stores references to the Provider on a Consumer differently across versions.\n    if (Consumer) {\n      let Provider;\n      if (Consumer._context) { // check this first, to avoid a deprecation warning\n        ({ Provider } = Consumer._context);\n      } else if (Consumer.Provider) {\n        ({ Provider } = Consumer);\n      }\n      if (Provider) {\n        return Provider;\n      }\n    }\n    throw new Error('Enzyme Internal Error: can’t figure out how to get Provider from Consumer');\n  }\n\n  createElement(...args) {\n    return React.createElement(...args);\n  }\n\n  wrapWithWrappingComponent(node, options) {\n    return {\n      RootFinder,\n      node: wrapWithWrappingComponent(React.createElement, node, options),\n    };\n  }\n}\n\nmodule.exports = ReactSixteenAdapter;\n"]}